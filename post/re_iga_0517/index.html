<!doctype html><html lang=en-us>
<head>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/xiaoshan1994.github.io\/","author":{"@type":"Person","name":null},"name":"Blog of Kai","description":"Each group is expected to perform a research question about two real world issues: BREXIT and national stimulus plans.","url":"https:\/\/xiaoshan1994.github.io\/post\/re_iga_0517\/","keywords":"[]"}</script>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Hugo 0.88.1 with theme Tranquilpeak 0.5.3-BETA">
<meta name=author content>
<meta name=keywords content>
<meta name=description content="Each group is expected to perform a research question about two real world issues: BREXIT and national stimulus plans.">
<meta property="og:description" content="Each group is expected to perform a research question about two real world issues: BREXIT and national stimulus plans.">
<meta property="og:type" content="article">
<meta property="og:title" content="EIOA Class: Integrated Group Assignment(IGA)">
<meta name=twitter:title content="EIOA Class: Integrated Group Assignment(IGA)">
<meta property="og:url" content="https://xiaoshan1994.github.io/post/re_iga_0517/">
<meta property="twitter:url" content="https://xiaoshan1994.github.io/post/re_iga_0517/">
<meta property="og:site_name" content="Blog of Kai">
<meta property="og:description" content="Each group is expected to perform a research question about two real world issues: BREXIT and national stimulus plans.">
<meta name=twitter:description content="Each group is expected to perform a research question about two real world issues: BREXIT and national stimulus plans.">
<meta property="og:locale" content="en">
<meta property="article:published_time" content="2021-05-17T00:00:00">
<meta property="article:modified_time" content="2021-05-17T00:00:00">
<meta property="article:section" content="Research">
<meta property="article:tag" content="EIOA">
<meta property="article:tag" content="Ranran">
<meta property="article:tag" content="IGA">
<meta name=twitter:card content="summary">
<title>EIOA Class: Integrated Group Assignment(IGA)</title>
<link rel=icon href=https://xiaoshan1994.github.io/favicons/>
<link rel=canonical href=https://xiaoshan1994.github.io/post/re_iga_0517/>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer>
<link rel=stylesheet href=https://xiaoshan1994.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script>
</head>
<body>
<div id=blog>
<header id=header data-behavior>
<i id=btn-open-sidebar class="fa fa-lg fa-bars"></i>
<div class=header-title>
<a class=header-title-link href=/ aria-label>Blog of Kai</a>
</div>
</header>
<nav id=sidebar data-behavior>
<div class=sidebar-container>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=/ title=Home>
<span class=sidebar-button-desc>Home</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=/post/ title=Posts>
<span class=sidebar-button-desc>Posts</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=/about/ title=About>
<span class=sidebar-button-desc>About</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=/contact/ title=Contact>
<span class=sidebar-button-desc>Contact</span>
</a>
</li>
</ul>
<ul class=sidebar-buttons>
</ul>
<ul class=sidebar-buttons>
</ul>
</div>
</nav>
<div id=main data-behavior class=hasCoverMetaIn>
<article class=post id=top>
<div class="post-header main-content-wrap text-left">
<h1 class=post-title>
EIOA Class: Integrated Group Assignment(IGA)
</h1>
<div class="postShorten-meta post-meta">
<time datetime=2021-05-17T00:00:00Z>
17, 2021
</time>
<span></span>
<a class=category-link href=/categories/research>Research</a>
</div>
</div>
<div class="post-content markdown">
<div class=main-content-wrap>
<p>Each group is expected to perform a research question about two real-world issues: BREXIT and national stimulus plans.<br>
in a post COVID-19 world.</p>
<h3 id=tasks>Tasks</h3>
<ol>
<li>Load from pickle</li>
<li>Calculate for a specific country territorial CO2 emissions</li>
<li>Calculate for a specific country consumption-based CO2 emissions</li>
<li>Identify top-5 sectors that contribute to territorial emissions of a specific country</li>
<li>Identify top-5 final demand expenditure on products that contribute to consumption-based emissions of a specific country</li>
<li>Identify top-5 countries where the specific country displaced its emissions to</li>
</ol>
<p>June 11 at 17:00 (deadline):Code and report(.pdf) in Brightspace/Assignments.<br>
<link href="https://fonts.googleapis.com/css?family=Poppins" rel=stylesheet type=text/css>
<div style=font-family:poppins;font-size:30px;font-style:normal;font-weight:700>
You are awesome.
You're even better!
What else ...
</div>
</p>
<p>import numpy as np<br>
import time<br>
import pickle as pkl<br>
import os<br>
from pathlib import Path<br>
np.set_printoptions(precision=2)</p>
<p>tstart = time.time()<br>
##############################################<br>
##############################################</p>
<h1 id=task-1-load-mrio-from-pickle>TASK 1: Load MRIO from Pickle</h1>
<p>##############################################</p>
<h1 id=folder-settings-change-the-current-working-directory-to-reflect-the-location-in-your-computer>Folder settings: Change the current working directory to reflect the location in your computer</h1>
<h1 id=run-osgetcwd-to-find-out-what-that-is>(run os.getcwd() to find out what that is)</h1>
<h1 id=folder-to-read-mrio-from>Folder to read MRIO from</h1>
<p>os.getcwd()<br>
mrio_dir = Path("/&mldr;/EIOA/IGA/MRIO") # Fill " " with your working directory path</p>
<p>##############################################</p>
<h1 id=load-mrio>Load MRIO</h1>
<p>tstart = time.time()</p>
<p>mrio_name = &lsquo;mrio.pkl&rsquo;<br>
mrio_str = mrio_dir.joinpath(mrio_name)<br>
pkl_in = open(mrio_str,&ldquo;rb&rdquo;) # &lsquo;open&rsquo; the mrio.pkl file<br>
mrio = pkl.load(pkl_in) # load the mrio.pkl file to mrio<br>
pkl_in.close()</p>
<p>tend = time.time()<br>
print(&lsquo;Done reading in %5.2f s\n&rsquo;% (tend - tstart))</p>
<h1 id=category-counts>category counts</h1>
<p>nr = mrio[&lsquo;label&rsquo;][&lsquo;region&rsquo;].count()[0]<br>
ns = mrio[&lsquo;label&rsquo;][&lsquo;product&rsquo;].count()[0]<br>
ny = mrio[&lsquo;label&rsquo;][&lsquo;final&rsquo;].count()[0]</p>
<h1 id=mrio-matrixvector-variables>MRIO matrix/vector variables</h1>
<p>L = mrio[&lsquo;L&rsquo;]<br>
Y = mrio[&lsquo;Y&rsquo;]<br>
V = mrio[&lsquo;V&rsquo;]<br>
F = mrio[&lsquo;F&rsquo;]<br>
F_co2 = mrio[&lsquo;F_co2&rsquo;]<br>
H = mrio[&lsquo;H&rsquo;]<br>
H_co2 = mrio[&lsquo;H_co2&rsquo;]</p>
<h1 id=calculate-total-output>calculate total output</h1>
<p>x = L @ Y.sum(1)</p>
<h1 id=calculate-direct-emissions-intensity>calculate direct emissions intensity</h1>
<p>f_co2 = F_co2/x # resulting in na or inf when x = 0<br>
f_co2 = np.nan_to_num(f_co2, copy=False, nan=0.0, posinf=0.0, neginf=0.0) # replace na and inf with 0</p>
<p>##############################################<br>
##############################################</p>
<h1 id=configuration-for-all-following-tasks>Configuration for all following tasks</h1>
<h1 id=change-to-choose-different-region-c-in-0-to-48>change to choose different region: c in 0 to 48</h1>
<h1 id=position-20-is-netherlands>position 20 is Netherlands</h1>
<h1 id=explore-mriolabelregion-to-find-others>explore mrio[&lsquo;label&rsquo;][&lsquo;region&rsquo;] to find others</h1>
<p>c = 20</p>
<h1 id=to-locate-country-columns-or-rows-in-a-and-l-cns--c1ns>To locate country columns or rows in A and L: &lsquo;c*ns : (c+1)*ns&rsquo;</h1>
<h1 id=to-locate-country-columns-in-y-cny--c1ny>To locate country columns in Y: &lsquo;c*ny : (c+1)*ny&rsquo;</h1>
<h1 id=convert-units-from-kg-to-mt-1e-9>convert units from kg to Mt (*1e-9)</h1>
<p>conv = 1e-9</p>
<p>##############################################<br>
##############################################</p>
<h1 id=task-2-calculate-territorial-emissions-for-a-specific-country>TASK 2. Calculate territorial emissions for a specific country</h1>
<h1 id=we-want-to-report-three-cols-production-related-households-and-total-plus-a-global-contribution-percentage>We want to report three cols: production-related, households and total, plus a global contribution percentage</h1>
<p>pba = np.zeros((1,4))<br>
pba[:,0] = F_co2[c*ns : (c+1)*ns].sum() <em>conv # direct emissions by producers <br>
pba[:,1] = H_co2[c</em>ny : (c+1)*ny].sum() *conv # direct emissions by households<br>
pba[:,2] = pba[:,0:2].sum()<br>
pba[:,3] = pba[:,2]/((F_co2.sum()+H_co2.sum())*conv)*100</p>
<p>##############################################<br>
##############################################</p>
<h1 id=task-3-calculate-for-a-specific-country-consumption-based-co2-emissions>TASK 3. Calculate for a specific country consumption-based CO2 emissions</h1>
<h1 id=we-want-to-report-three-cols-production-generated-households-and-total-plus-a-global-contribution-percentage>We want to report three cols: production-generated, households and total, plus a global contribution percentage</h1>
<p>cba = np.zeros((1,4)) <br>
y = Y[:, c*ny : (c+1)*ny].sum(1) # aggregate final demand to one column</p>
<p>cba[:,0] = f_co2 @ L @ y <em>conv # footprint traced to production emissions<br>
cba[:,1] = H_co2[c</em>ny : (c+1)*ny].sum()*conv # footprint traced to household direct emissions<br>
cba[:,2] = cba[:,:2].sum()<br>
cba[:,3] = cba[:,2]/((F_co2.sum()+H_co2.sum())*conv)*100</p>
<p>##############################################<br>
##############################################</p>
<h1 id=task-4-identify-top-5-sectors-that-contribute-to-production-based-emissions>TASK 4. Identify top-5 sectors that contribute to production-based emissions</h1>
<h1 id=pba_s-we-want-to-report-in-rows-each-sector-plus-household>pba_s: we want to report in rows each sector plus household</h1>
<p>label_s = list(mrio[&lsquo;label&rsquo;][&lsquo;product&rsquo;][&lsquo;Name&rsquo;]) + [&lsquo;Household direct&rsquo;]<br>
pba_s = F_co2[c*ns : (c+1)*ns] *conv<br>
pba_s = np.append(pba_s, pba[0,1]) # append household direct emissions to the end</p>
<h1 id=pba_s_sorted-we-want-to-report-in-rows-the-sorted-in-descending-order-sectoral-plus-household-results>pba_s_sorted: we want to report in rows the &lsquo;sorted&rsquo; (in descending order) sectoral plus household results;</h1>
<h1 id=3-cols-sectoral-emissions-percent-and-cumulative-percent>3 cols: sectoral emissions, percent, and cumulative percent</h1>
<p>pba_s_sorted = np.zeros((ns+1,3))<br>
rank = np.argsort(pba_s) # returns indices that&rsquo;d sort the array low to high<br>
rank = np.flip(rank) # flip so it goes &lsquo;high to low&rsquo;</p>
<p>pba_s_sorted[:,0] = np.sort(pba_s) # sort the values from &lsquo;low to high&rsquo;<br>
pba_s_sorted[:,0] = np.flip(pba_s_sorted[:,0]) # flip so the values go from high to low<br>
pba_s_sorted[:,1] = pba_s_sorted[:,0]/pba[0,2]*100 # percentage contribution<br>
pba_s_sorted[:,2] = np.cumsum(pba_s_sorted[:,1]) # cumulative percentage contribution</p>
<h1 id=sector-names-of-the-top-5-emitters>sector names of the top 5 emitters</h1>
<p>for i in range(0,5) : <br>
print(&ldquo;Top&rdquo;, i+1, label_s[rank[i]],"(sector index =", rank[i], &ldquo;);")</p>
<p>##############################################<br>
##############################################</p>
<h1 id=task-5-identify-top-5-final-demand-spending-sectors-that-contribute-to-consumption-based-emissions>TASK 5. Identify top-5 final demand spending sectors that contribute to consumption-based emissions</h1>
<h1 id=task-6-identify-top-5-countries-where-the-specific-country-displaced-emissions-to>TASK 6. Identify top-5 countries where the specific country displaced emissions to</h1>
<p>label_s = list(mrio[&lsquo;label&rsquo;][&lsquo;product&rsquo;][&lsquo;Name&rsquo;]) + [&lsquo;Household direct&rsquo;]<br>
cba_s = f_co2 @ L @ np.diag(y)*conv<br>
cba_rs = np.reshape(cba_s,(nr,ns)) # pay attention to get the new shape dimension right<br>
cba_s = cba_rs.sum(0) # by final demand sector<br>
cba_s = np.append(cba_s,cba[0,1]) # append household direct emissions to the end<br>
cba_r = cba_rs.sum(1) # by emitting regions<br>
cba_r[c] = cba_r[c] + cba[0,1] # add HH direct emissions</p>
<h1 id=cba_s_sort-we-want-to-report-in-rows-each-final-demand-sectorproduct-plus-household>cba_s_sort: we want to report in rows each final demand sector(product) plus household</h1>
<h1 id=3-cols-sectoral-emissions-percent-and-cumulative-percent-1>3 cols: sectoral emissions, percent, and cumulative percent</h1>
<p>cba_s_sorted = np.zeros((ns+1,3))<br>
rank = np.argsort(cba_s) # sort from &lsquo;low to high&rsquo; and returns indices<br>
rank = np.flip(rank) # flip so it goes &lsquo;high to low&rsquo;</p>
<p>cba_s_sorted[:,0] = np.sort(cba_s) # sort the values from &lsquo;low to high&rsquo;<br>
cba_s_sorted[:,0] = np.flip(cba_s_sorted[:,0]) # flip so the values go from high to low<br>
cba_s_sorted[:,1] = cba_s_sorted[:,0]/cba[0,2]*100 # percentage contribution<br>
cba_s_sorted[:,2] = np.cumsum(cba_s_sorted[:,1]) # cumulative percentage contribution</p>
<h1 id=sector-names-of-the-top-5-final-demand-product-categories>sector names of the top 5 final demand product categories</h1>
<p>for i in range(0,5) : <br>
print(&ldquo;Top&rdquo;, i+1, label_s[rank[i]],"(sector index =&rdquo;, rank[i], &ldquo;);")</p>
<h1 id=cba_r_sort-we-want-to-report-in-rows-each-country-of-origin>cba_r_sort: we want to report in rows each country of origin</h1>
<h1 id=3-cols-country-emissions-percent-and-cumulative-percent>3 cols: country emissions, percent, and cumulative percent</h1>
<p>label_r = list(mrio[&lsquo;label&rsquo;][&lsquo;region&rsquo;][&lsquo;CountryName&rsquo;])<br>
cba_r_sorted = np.zeros((nr,3))<br>
rank = np.argsort(cba_r) # sort from &lsquo;low to high&rsquo; and returns indices<br>
rank = np.flip(rank) # flip so it goes &lsquo;high to low&rsquo;</p>
<p>cba_r_sorted[:,0] = np.sort(cba_r) # sort the values from &lsquo;low to high&rsquo;<br>
cba_r_sorted[:,0] = np.flip(cba_r_sorted[:,0]) # flip so the values go from high to low<br>
cba_r_sorted[:,1] = cba_r_sorted[:,0]/cba[0,2]*100 # percentage contribution<br>
cba_r_sorted[:,2] = np.cumsum(cba_r_sorted[:,1]) # cumulative percentage contribution</p>
<h1 id=country-names-of-the-top-5-displacement-locations>country names of the top 5 displacement locations</h1>
<p>if c in rank[0:5] :<br>
for i in range(0,6) :<br>
if rank[i] != c : <br>
print(&ldquo;Top&rdquo;, i+1, label_r[rank[i]],"(country index =&rdquo;, rank[i], &ldquo;);")<br>
else :<br>
for i in range(0,5) : <br>
print(&ldquo;Top&rdquo;, i+1, label_r[rank[i]],"(country index =&rdquo;, rank[i], &ldquo;);")</p>
</div>
</div>
<div id=post-footer class="post-footer main-content-wrap">
<div class=post-footer-tags>
<span class="text-color-light text-small"></span><br>
<a class="tag tag--primary tag--small" href=/tags/eioa/>EIOA</a>
<a class="tag tag--primary tag--small" href=/tags/ranran/>Ranran</a>
<a class="tag tag--primary tag--small" href=/tags/iga/>IGA</a>
</div>
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=/post/skill_coder_05172/ data-tooltip="Changing Fonts in hugo website" aria-label=": Changing Fonts in hugo website">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml"></span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=/post/skill_coder_0517/ data-tooltip="Make Your Website Social Media Card" aria-label=": Make Your Website Social Media Card">
<span class="hide-xs hide-sm text-small icon-mr"></span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label>
<i class="fa fa-share-alt" aria-hidden=true></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#top aria-label>
<i class="fa fa-arrow-up" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
</div>
</article>
<footer id=footer class=main-content-wrap>
<span class=copyrights>
&copy; 2021 Blog of Kai.
</span>
</footer>
</div>
<div id=bottom-bar class=post-bottom-bar data-behavior>
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=/post/skill_coder_05172/ data-tooltip="Changing Fonts in hugo website" aria-label=": Changing Fonts in hugo website">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml"></span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=/post/skill_coder_0517/ data-tooltip="Make Your Website Social Media Card" aria-label=": Make Your Website Social Media Card">
<span class="hide-xs hide-sm text-small icon-mr"></span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label>
<i class="fa fa-share-alt" aria-hidden=true></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#top aria-label>
<i class="fa fa-arrow-up" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
</div>
</div>
<div id=about>
<div id=about-card>
<div id=about-btn-close>
<i class="fa fa-times"></i>
</div>
<h4 id=about-card-name></h4>
</div>
</div>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://xiaoshan1994.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin=anonymous></script>
<script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      CommonHTML: { linebreaks: { automatic: true } },
      tex2jax: { inlineMath: [ ['$', '$'], ['\\(','\\)'] ], displayMath: [ ['$$','$$'], ['\\[', '\\]'] ], processEscapes: false },
      messageStyle: 'none'
    });
  </script>
</body>
</html>